<ion-header mode="ios">
  <div class="header" [ngClass]="{'pading_ios': _services.padingios}">
    <ion-row class="ancho_full">
      <ion-col size="3" class="col_header" (click)="back()">
        <ion-back-button mode="ios" text=""></ion-back-button>
      </ion-col>
      <ion-col size="6" class="col_header">
        <p class="h5">Property Management</p>
      </ion-col>
      <ion-col size="3" class="col_header">
        <img src="/assets/icon/relocation_services.svg" style="width: 45px;" alt="">
      </ion-col>
    </ion-row>
  </div>
  <div class="headergray"></div>
</ion-header>

<ion-content [scrollEvents]="true" (ionScroll)="Scroll($event)">

  <div class="appointments">
    <!--TARJETA DEL ASIGNADO-->
    <ion-card *ngxPermissionsOnly="['1','2','3','11','13','19']">
      <ion-row>
        <ion-col size="2">
          <div class="avatares">
            <div class="content">
              <img class="img" src="{{_services.url_images}}{{data_dependent?.avatar}}" fallimg="avatar">
            </div>
          </div>
        </ion-col>

        <ion-col size="6">
          <span class="h15 gray">Delivered To</span>
          <br>
          <span class="h12" *ngIf="!show_name_assignee">{{data_dependent?.relationship}} /
            {{data_dependent?.name}}</span>
          <span class="h12" *ngIf="show_name_assignee">{{data_dependent?.relationship}} /
            {{(data_dependent?.name.length>10) ?  (data_dependent?.name | slice:0:10)+'..': data_dependent?.name}}</span>
        </ion-col>

        <ion-col size="2">
          <ion-fab>
            <ion-fab-button size="small" class="btn_fab_size"
              (click)="call(data_dependent.phone, 'work number of '+data_dependent.name)">
              <ion-icon name="call" class="btn_fab_size__icon"></ion-icon>
            </ion-fab-button>
          </ion-fab>
        </ion-col>

        <ion-col size="2">
          <ion-fab>
            <ion-fab-button size="small" class="btn_fab_size" (click)="sendMessage()">
              <ion-icon name="chatbox" class="btn_fab_size__icon"></ion-icon>
            </ion-fab-button>
          </ion-fab>
        </ion-col>

      </ion-row>
    </ion-card>

    <!--TARJETA DEL COORDINADOR-->
    <div *ngFor="let item of coordinador">
      <ion-card *ngxPermissionsOnly="['4']">
        <ion-row>
          <ion-col size="2">
            <div class="avatares">
              <div class="content">
                <img class="img" src="{{_services.url_images}}{{item.photo}}" fallimg="avatar">
              </div>
            </div>
          </ion-col>

          <ion-col size="6">
            <span class="h15 gray">Coordinator</span>
            <br>
            <span class="h12" *ngIf="!show_name_assignee">{{item.name}}</span>
            <span class="h12" *ngIf="show_name_assignee">{{(item.name.length>10) ?  (item.name | slice:0:10)+'..': item.name}}</span>
          </ion-col>

          <ion-col size="2" class="top-fab">
            <ion-fab>
              <ion-fab-button size="small" class="btn_fab_size" (click)="call(item.phone, 'work number of '+item.name)">
                <ion-icon name="call" class="btn_fab_size__icon"></ion-icon>
              </ion-fab-button>
            </ion-fab>
          </ion-col>

          <ion-col size="2" class="top-fab">
            <ion-fab>
              <ion-fab-button size="small" class="btn_fab_size" (click)="sendMessage()">
                <ion-icon name="chatbox" class="btn_fab_size__icon"></ion-icon>
              </ion-fab-button>
            </ion-fab>
          </ion-col>
        </ion-row>
      </ion-card>
    </div>
    <!--TARJETA DEL CONSULTANT-->
    <div *ngFor="let item of consultant">
      <ion-card *ngxPermissionsOnly="['4']">
        <ion-row>
          <ion-col size="2">
            <div class="avatares">
              <div class="content">
                <img class="img" src="{{_services.url_images}}{{item.photo}}" fallimg="avatar">
              </div>
            </div>
          </ion-col>

          <ion-col size="6">
            <span class="h15 gray">Consultant</span>
            <br>
            <span class="h12" *ngIf="!show_name_assignee">{{item.name}}</span>
            <span class="h12" *ngIf="show_name_assignee">{{(item.name.length>10) ?  (item.name | slice:0:10)+'..': item.name}}</span>
          </ion-col>

          <ion-col size="2" class="top-fab">
            <ion-fab>
              <ion-fab-button size="small" class="btn_fab_size" (click)="call(item.phone, 'work number of '+item.name)">
                <ion-icon name="call" class="btn_fab_size__icon"></ion-icon>
              </ion-fab-button>
            </ion-fab>
          </ion-col>

          <ion-col size="2" class="top-fab">
            <ion-fab>
              <ion-fab-button size="small" class="btn_fab_size" (click)="sendMessage()">
                <ion-icon name="chatbox" class="btn_fab_size__icon"></ion-icon>
              </ion-fab-button>
            </ion-fab>
          </ion-col>
        </ion-row>
      </ion-card>
    </div>

    <ion-row>
      <ion-col size="6" *ngxPermissionsOnly="['1','2','3','11','13','19']">
        <span class="h9 gray">Service ID</span><br>
        <span class="h8">SN-{{area.id}}</span>
      </ion-col>

      <!--ion-col size="6" *ngxPermissionsOnly="['4']" style="margin:auto">
        <span class="h9 gray">Delivered To</span><br>
        <span class="h8">{{data.deliveredTo}}</span>
      </ion-col-->

      <ion-col size="6">
        <ion-item class="filter">
          <ion-select interface="action-sheet" mode="ios" [(ngModel)]="area.statusId">
            <ion-select-option [disabled]="disabled" *ngFor="let item of ca_estatus" [value]="item.id">{{item.status}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>

      <ion-col size="6" *ngxPermissionsOnly="['1','2','3','11','13','19']">
        <span class="h9 gray">Autho Date</span><br>
        <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>
        <span class="h8"> {{area.authoDate | date: 'dd MMM yyyy'}}</span>
      </ion-col>

      <ion-col size="6" *ngxPermissionsOnly="['1','2','3','11','13','19']">
        <span class="h9 gray">Completion Date</span><br>
        <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>
        <span class="h8"> {{area.serviceCompletionDate | date: 'dd MMM yyyy'}}</span>
      </ion-col>

      <ion-col size="6" *ngxPermissionsOnly="['1','2','3','11','13','19']">
        <span class="h9 gray">Autho Acceptance Date</span><br>
        <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>
        <span class="h8">{{area.authoAcceptanceDate | date: 'dd MMM yyyy'}}</span>
      </ion-col>

      <ion-col size="6" *ngxPermissionsOnly="['1','2','3','11','13','19']">
        <div *ngIf="area.coordination">
          <span class="h9 gray">Coordination</span><br>
          <ion-checkbox [(ngModel)]="area.coordination" class="size"></ion-checkbox>
        </div>
      </ion-col>

      <!--ion-col size="6" *ngxPermissionsOnly="['4']" style="margin:auto">
        <span class="h9 gray">Country</span><br>
        <span class="h8">{{data.homecountry}}</span>
      </ion-col>

      <ion-col size="6" *ngxPermissionsOnly="['4']" style="margin:auto">
        <span class="h9 gray">City</span><br>
        <span class="h8">{{data.homecity}}</span>
      </ion-col-->
    </ion-row>
  </div>

  <div class="appointments">
    <ion-row>
      <ion-col size="12">
        <span class="title_general_black">Property</span>
      </ion-col>

      <ion-col size="12">
        <ion-item>
          <ion-label position="floating">Property Address</ion-label>
          <ion-textarea [(ngModel)]="area.propertAddress" rows="3" [disabled]="disabled"></ion-textarea>
        </ion-item>
      </ion-col>

      <ion-col size="12">
        <ion-item>
          <ion-label position="floating">Library</ion-label>
          <ion-select interface="action-sheet" [disabled]="disabled" mode="ios" [(ngModel)]="area.library">
            <ion-select-option *ngFor="let data of catalog_library" [value]="data.id">{{data.library}}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>

      <ion-col size="12">&nbsp;</ion-col>

      <ion-col size="6">
        <ion-label position="floating">Vacant</ion-label><br><br>
        <ion-toggle color="success" mode="ios" (ionChange)="eventToggle_($event)" [disabled]="disabled" [(ngModel)]="area.vacant"></ion-toggle>
      </ion-col>

      <ion-col size="6">
        <ion-label position="floating">Rented</ion-label><br><br>
        <ion-toggle color="success" mode="ios" (ionChange)="eventToggle($event)" [disabled]="disabled" [(ngModel)]="area.rented"></ion-toggle>
      </ion-col>

    </ion-row>
  </div>


  <mat-accordion multi *ngIf="show_vacant">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">Property Inspection</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>

          <ion-col size="12">
            <ion-item lines="none">
              <ion-label style="color: gray;" class="h9" position="floating">Last Property Inspection</ion-label><br>
              <ion-datetime displayFormat="DD MMM YYYY" [disabled]="disabled" [(ngModel)]="area.lastPropertyInspection"
                mode="ios">
              </ion-datetime>
            </ion-item>
          </ion-col>


          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Report</ion-label>
              <ion-textarea [(ngModel)]="area.report" rows="3" [disabled]="disabled"></ion-textarea>
            </ion-item>
          </ion-col>

          <ion-col size="12">&nbsp;</ion-col>

          <ion-col size="9" class="flexdosts">
            <span class="title_general_black">Photos</span>
          </ion-col>
          <ion-col size="3" class="align__end">
            <img src="/assets/icon/icon_add.svg" style="height: 100%;" (click)="photo_()" *ngIf="__userlog__.role.id!=3" class="btn_size">
          </ion-col>

          <ion-col size="12">
            <ion-card>
              <ion-slides class="app" [options]="slideOptsOne" pager="true">
                <ion-slide class="card-comments"
                  *ngFor="let item of area.photoInspectionPropertyManagements; let i = index">
                  <img src="{{item.b64}}" class="img" *ngIf="item.id == 0" class="img__size">
                  <img src="{{_services.url_images}}{{item.photo}}" class="img__size" *ngIf="item.id != 0">
                </ion-slide>
              </ion-slides>
            </ion-card>
          </ion-col>

          <ion-col size="12">&nbsp;</ion-col>

          <ion-col size="12">
            <ion-item lines="none">
              <ion-label style="color: gray;" class="h9" position="floating">Next Property Inspection</ion-label><br>
              <ion-datetime displayFormat="DD MMM YYYY" [disabled]="disabled" [(ngModel)]="area.nextPropertyInspection"
                mode="ios">
              </ion-datetime>
            </ion-item>
          </ion-col>

        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br *ngIf="show_vacant">
  <br *ngIf="show_vacant">

  <mat-accordion multi *ngIf="show_vacant">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">On Going Maintenance</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">item</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled"
                [(ngModel)]="area.itemOngoingMaintanance">
                <ion-select-option [value]="1">item 1</ion-select-option>
                <ion-select-option [value]="2">item 2</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Provider Visit (Frequency)</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled" [(ngModel)]="area.providerVisit">
                <ion-select-option [value]="1">provider 1</ion-select-option>
                <ion-select-option [value]="2">provider 2</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Provider Visit (Frequency)</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled" [(ngModel)]="area.providerPayment">
                <ion-select-option [value]="1">provider 1</ion-select-option>
                <ion-select-option [value]="2">provider 2</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <br *ngIf="show_vacant">
  <br *ngIf="show_vacant">

  <mat-accordion multi *ngIf="show_vacant">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">Bills</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Bill Type</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled" [(ngModel)]="area.billType">
                <ion-select-option *ngFor="let item of catalog_bill" [value]="data.id">{{item.type}}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">&nbsp;</ion-col>

          <ion-col size="9" class="flexdosts">
            <span class="title_general_black">Photos</span>
          </ion-col>
          <ion-col size="3" class="align__end" >
            <img src="/assets/icon/icon_add.svg" style="height: 100%;" (click)="__photo__()" *ngIf="__userlog__.role.id!=3" class="btn_size">
          </ion-col>

          <ion-col size="12">
            <ion-card>
              <ion-slides class="app" [options]="slideOptsOne" pager="true">
                <ion-slide class="card-comments" *ngFor="let item of area.photoBillPropertyManagements; let i = index">
                  <img src="{{item.b64}}" class="img" *ngIf="item.id == 0" class="img__size">
                  <img src="{{_services.url_images}}{{item.photo}}" class="img__size" *ngIf="item.id != 0">
                </ion-slide>
              </ion-slides>
            </ion-card>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Comments</ion-label>
              <ion-textarea rows="3" [disabled]="disabled" [(ngModel)]="area.commentBill"></ion-textarea>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Provider Payment (Frequency)</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled"
                [(ngModel)]="area.providerPaymentBill">
                <ion-select-option [value]="1">Payment Bill 1</ion-select-option>
                <ion-select-option [value]="2">Payment Bill 2</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br *ngIf="show_vacant">
  <br *ngIf="show_vacant">

  <mat-accordion multi *ngIf="show_vacant">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">Mail</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>


          <ion-col size="12">&nbsp;</ion-col>

          <ion-col size="9" class="flexdosts">
            <span class="title_general_black">Photos</span>
          </ion-col>
          <ion-col size="3" class="align__end">
            <img src="/assets/icon/icon_add.svg" style="height: 100%;" *ngIf="__userlog__.role.id!=3" (click)="photoMail()" class="btn_size">
          </ion-col>

          <ion-col size="12">
            <ion-card>
              <ion-slides class="app" [options]="slideOptsOne" pager="true">
                <ion-slide class="card-comments" *ngFor="let item of area.photoMailPropertyManagements; let i = index">
                  <img src="{{item.b64}}" class="img" *ngIf="item.id == 0" class="img__size">
                  <img src="{{_services.url_images}}{{item.photo}}" class="img__size" *ngIf="item.id != 0">
                </ion-slide>
              </ion-slides>
            </ion-card>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Comment</ion-label>
              <ion-textarea rows="3" [disabled]="disabled" [(ngModel)]="area.commentMail"></ion-textarea>
            </ion-item>
          </ion-col>
        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br *ngIf="show_vacant">
  <br *ngIf="show_vacant">

  <mat-accordion multi *ngIf="show_rented">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <ion-row>
            <ion-col size="12">
              <ion-item>
                <ion-label position="floating">Marketing (If we are Assisting)</ion-label>
                <ion-input [disabled]="disabled" placeholder="Marketing (If we are Assisting)"
                  [(ngModel)]="area.marketing" type="text"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>
          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Links</ion-label>
              <ion-input [disabled]="disabled" placeholder="Links" [(ngModel)]="area.links" type="text"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="6">
            <ion-item lines="none">
              <ion-label style="color: gray;" class="h9" position="floating">Upcomming Visit</ion-label><br>
              <ion-datetime displayFormat="DD MMM YYYY" [disabled]="disabled" [(ngModel)]="area.upcommingVisit"
                mode="ios">
              </ion-datetime>
            </ion-item>
          </ion-col>

          <ion-col size="6"></ion-col>
        </ion-row>


        <ion-row>
          <ion-col size="7">
            <span class="h9">Visit Report</span>
          </ion-col>
          <ion-col size="3" class="flexdosts"></ion-col>
          <ion-col size="2" class="align__end">
            <img src="/assets/icon/icon_add.svg" *ngIf="!addReport && __userlog__.role.id!=3" (click)="addReport = !addReport"
              style="height: 100%;" class="btn_size" >
            <img src="/assets/icon/icon_cancel.svg" *ngIf="addReport" (click)="addReport = !addReport"
              style="height: 100%; transform: rotate(45deg);" class="btn_size">
          </ion-col>
        </ion-row>

        <div class="editable" *ngIf="addReport">
          <ion-row>
            <ion-col size="12">
              <ion-label style="color: gray;" class="h12" position="floating">Report</ion-label>
              <ion-item class="ion-textarea">
                <ion-textarea rows="4" [(ngModel)]="report_data.visitReport" maxlength="300"></ion-textarea>
              </ion-item>
            </ion-col>
            <ion-col size="6" offset="3">
              <ion-button class="buttom_ buttom__btn_login" [disabled]="report_data.visitReport == null"
                (click)="addVisitReport()">Add Report</ion-button>
            </ion-col>
          </ion-row>
        </div>

        <div class="activitie" >
          <ion-row>
            <ion-col size="12" *ngFor="let item of area.visitReportPropertyManagements; let i = index">
              <ion-item>
                <ion-textarea rows="3" [disabled]="disabled">{{item.visitReport}}</ion-textarea>
              </ion-item>
            </ion-col>
          </ion-row>
        </div>

        <ion-row>
          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Count Visits</ion-label>
              <ion-input [disabled]="disabled" placeholder="Count Visits" [(ngModel)]="area.countVisit" type="number">
              </ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Offer Received</ion-label>
              <ion-input [disabled]="disabled" placeholder="Offer Received" [(ngModel)]="area.offerReceived"
                type="text"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Submit</ion-label>
              <ion-input [disabled]="disabled" placeholder="Submit" [(ngModel)]="area.submit" type="text"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Offer Approved-Tenant selected</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled"
                [(ngModel)]="area.offerApprovedTenantSelected">
                <ion-select-option [value]="1">Offer Approved 1</ion-select-option>
                <ion-select-option [value]="2">Offer Approved 2</ion-select-option>
                <ion-select-option [value]="3">Offer Approved 3</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Lease Negotiation</ion-label>
              <ion-input [disabled]="disabled" placeholder="Lease Negotiation" [(ngModel)]="area.leaseNegotiation"
                type="text"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Send Draft</ion-label>
              <ion-input [disabled]="disabled" placeholder="Send Draft" [(ngModel)]="area.sendDraft" type="text">
              </ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Comments</ion-label>
              <ion-textarea rows="3" [disabled]="disabled" [(ngModel)]="area.comments"></ion-textarea>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Signature Coordination</ion-label>
              <ion-input [disabled]="disabled" placeholder="Signature Coordination"
                [(ngModel)]="area.signatureCoordination" type="text"></ion-input>
            </ion-item>
          </ion-col>


        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br *ngIf="show_rented">
  <br *ngIf="show_rented">

  <mat-accordion multi *ngIf="show_rented">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">Payment Coordination</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>
          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Library</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled"
                [(ngModel)]="area.libraryPaymentCoordination">
                <ion-select-option *ngFor="let data of catalog_library" [value]="data.id">{{data.library}}
                </ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Tenancy Support</ion-label>
              <ion-input [disabled]="disabled" placeholder="Tenancy Support" [(ngModel)]="area.tenancySupport"
                type="text"></ion-input>
            </ion-item>
          </ion-col>

        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <br *ngIf="show_rented">
  <br *ngIf="show_rented">

  <mat-accordion multi>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">Report An Issue</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>
          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Severety</ion-label>
              <ion-select interface="action-sheet" mode="ios" [(ngModel)]="area.severity" [disabled]="disabled">
                <ion-select-option *ngFor="let item of catalog_severity" [value]="item.id">{{item.severity}}
                </ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Description</ion-label>
              <ion-textarea [(ngModel)]="area.descriptionReportIssue" rows="3" [disabled]="disabled"></ion-textarea>
            </ion-item>
          </ion-col>

          <ion-col size="12">&nbsp;</ion-col>

          <ion-col size="9" class="flexdosts">
            <span class="title_general_black">Photos</span>
          </ion-col>
          <ion-col size="3" class="align__end" >
            <img src="/assets/icon/icon_add.svg" style="height: 100%;" (click)="photo()" *ngIf="__userlog__.role.id!=3" class="btn_size">
          </ion-col>

          <ion-col size="12">
            <ion-card>
              <ion-slides class="app" [options]="slideOptsOne" pager="true">
                <ion-slide class="card-comments"
                  *ngFor="let item of area.photoReportIssuePropertyManagements; let i = index">
                  <img src="{{item.b64}}" class="img" *ngIf="item.id == 0" class="img__size">
                  <img src="{{_services.url_images}}{{item.photo}}" class="img__size" *ngIf="item.id != 0">
                </ion-slide>
              </ion-slides>
            </ion-card>
          </ion-col>

          <ion-col size="12">&nbsp;</ion-col>

          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Status</ion-label>
              <ion-select interface="action-sheet" mode="ios" [disabled]="disabled"
                [(ngModel)]="area.statusReportIssue">
                <ion-select-option *ngFor="let item of catalog_status_report;" [value]="item.id">
                  {{ item.status }}
                </ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>

          <ion-col size="12">
            <ion-item lines="none">
              <ion-label style="color: gray;" class="h7" position="floating">Quote Approval</ion-label><br>
              <ion-datetime displayFormat="DD MMM YYYY" [disabled]="disabled" [(ngModel)]="area.quoteApproval"
                mode="ios">
              </ion-datetime>
            </ion-item>
          </ion-col>

        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br>
  <br>

  <mat-accordion multi *ngIf="show_rented">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="user">
            <span class="title_general_black">Questions</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <ion-row>
          <ion-col size="12">
            <ion-item>
              <ion-label position="floating">Comment</ion-label>
              <ion-textarea [(ngModel)]="area.commentsQuestion" [disabled]="disabled" rows="3"></ion-textarea>
            </ion-item>
          </ion-col>
        </ion-row>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br *ngIf="show_rented">
  <br *ngIf="show_rented">


  <div class="appointments">
    <!------------------------------------------------------------------------------------------->
    <!--SECCION PARA SERVICES DOCUMENT-->
    <ion-row>
      <ion-col size="7">
        <span class="title_general_black">Service Documents<b class="purple">
            {{area.documentPropertyManagements.length + temporalDocument.length}}</b></span>
      </ion-col>
      <ion-col size="3" class="flexdosts"></ion-col>
      <ion-col size="2"  class="align__end">
        <img src="/assets/icon/icon_add.svg" style="height: 100%;" *ngIf="__userlog__.role.id!=3" (click)="addDocument();" class="btn_size">
      </ion-col>
    </ion-row>

    <div class="activitie" *ngFor="let item of area.documentPropertyManagements; let i = index" (click)="viewDoc(item.fileRequest)">
      <ion-list lines="none">
        <ion-item-sliding>
          <ion-item>
            <ion-row class="width">
              <ion-col size="2">
                <img src="/assets/icon/document_2.svg" class="avatar">
              </ion-col>
              <ion-col size="10">
                <span class="h9">Document Type</span><br>
                <span class="h15 gray">
                  <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>Uploaded
                  <span class="h12"> {{item.createdDate | date: 'dd MMM yyyy'}}</span>
                </span><br>
                <span class="h15 gray">
                  <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>Expiration
                  <span class="h12"> {{item.expirationDate | date: 'dd MMM yyyy'}}</span>
                </span>
              </ion-col>
            </ion-row>
          </ion-item>
          <ion-item-options>
            <ion-item-option color="danger" (click)="deleteDocument(item.id, i)" *ngxPermissionsOnly="['1','2','11','13','19']">
              <ion-icon slot="bottom" name="trash" class="iconslot"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </div>

    <div class="activitie" *ngFor="let item of temporalDocument; let i = index">
      <ion-list lines="none">
        <ion-item-sliding>
          <ion-item>
            <ion-row class="width">
              <ion-col size="2">
                <img src="/assets/icon/document_2.svg" class="avatar">
              </ion-col>
              <ion-col size="10">
                <span class="h9">Document Type</span><br>
                <span class="h15 gray">
                  <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>Uploaded
                  <span class="h12"> {{item.createdDate | date: 'dd MMM yyyy'}}</span>
                </span><br>
                <span class="h15 gray">
                  <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>Expiration
                  <span class="h12"> {{item.expirationDate | date: 'dd MMM yyyy'}}</span>
                </span>
              </ion-col>
            </ion-row>
          </ion-item>
          <ion-item-options (click)="deleteDocument(item.id, i)">
            <ion-item-option color="danger">
              <ion-icon slot="bottom" name="trash" class="iconslot"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </div>
    <!------------------------------------------------------------------------------------------->
    <!--SECCION PARA REQUEST PAYMENT-->
    <br>
    <br>
    <div *ngxPermissionsOnly="['1','2','3','11','13','19']">
      <ion-row>
        <ion-col size="7">
          <span class="title_general_black">Request Payment <b class="purple"> {{payment.length}}</b></span>
        </ion-col>
        <ion-col size="3" class="flexdosts">
          <div>
            <span class="h12 flexdosts">
              <div class="dot late"></div>&nbsp;Urgent
            </span>
          </div>
        </ion-col>
        <ion-col size="2" class="align__end">
          <img *ngIf="__userlog__.role.id!=3" src="/assets/icon/icon_add.svg" style="height: 100%;" class="btn_size">
        </ion-col>
      </ion-row>

      <div class="activitie" *ngFor="let item of payment; let i = index">
        <ion-list lines="none">
          <ion-item-sliding [ngClass]="{'urgent': item.urgent}">
            <ion-item>
              <ion-row class="width">
                <ion-col size="2">
                  <img src="/assets/icon/payment.svg" class="avatar">
                </ion-col>
                <ion-col size="10">
                  <span class="h15 gray">
                    Payment
                    <span class="h12"> {{item.desciption}}</span>
                  </span><br>
                  <span class="h15 gray">
                    Amount
                    <span class="h12"> {{item.ammount}}</span>
                  </span><br>
                  <span class="h15 gray">Status
                    <span class="h12"> </span>
                  </span>
                </ion-col>
              </ion-row>
            </ion-item>
            <ion-item-options>
              <ion-item-option color="danger">
                <ion-icon slot="bottom" name="trash" class="iconslot"></ion-icon>
              </ion-item-option>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </div>
      <br>
      <br>
    </div>
    <!------------------------------------------------------------------------------------------->
    <!--SECCION PARA COMENTARIOS-->
    <div *ngxPermissionsOnly="['1','2','3','11','13','19']">
      <ion-row>
        <ion-col size="7">
          <span class="title_general_black">Comments <b class="purple">
              {{area.commentPropertyManagements.length}}</b></span>
        </ion-col>
        <ion-col size="3" class="flexdosts"></ion-col>
        <ion-col size="2" class="align__end">
          <img src="/assets/icon/icon_add.svg" *ngIf="!addComment_ && __userlog__.role.id!=3" (click)="addComment_ = !addComment_"
            style="height: 100%;" class="btn_size">
          <img src="/assets/icon/icon_cancel.svg" *ngIf="addComment_" (click)="addComment_ = !addComment_"
            style="height: 100%; transform: rotate(45deg);" class="btn_size">
        </ion-col>
      </ion-row>

      <div class="editable" *ngIf="addComment_">
        <ion-row>
          <ion-col size="12">
            <ion-label style="color: gray;" class="h12" position="floating">Comment</ion-label>
            <ion-item class="ion-textarea">
              <ion-textarea rows="4" [(ngModel)]="comment_data.comments" maxlength="300"></ion-textarea>
            </ion-item>
          </ion-col>

          <ion-col size="6" offset="3">
            <ion-button class="buttom_ buttom__btn_login" [disabled]="comment_data.comments == null"
              (click)="addComment()">Add Comment</ion-button>
          </ion-col>
        </ion-row>
      </div>

      <div class="documents" *ngIf="area.commentPropertyManagements.length > 0 || temporalComment.length > 0">
        <ion-card>
          <ion-slides class="coments" [options]="slideOptsOne" pager="true">
            <ion-slide class="card-comments" *ngFor="let item of temporalComment; let i = index">
              <ion-row style="text-align:initial;">
                <ion-col size="2">
                  <div class="avatares">
                    <div class="content">
                      <img src="{{_services.url_images}}{{item.user.avatar}}" class="img" fallimg="avatar">
                    </div>
                  </div>
                </ion-col>

                <ion-col size="5">
                  <span class="h15 gray">{{item.user.role.role}}</span><br>
                  <span class="h12" *ngIf="!show_name_assignee">{{item.user.name}} {{item.user.lastName}} {{item.user.motherLastName}}</span>
                  <span class="h12" *ngIf="show_name_assignee">{{(item.user.name.length>10) ?  (item.user.name | slice:0:10)+'..': item.user.name}}</span>
                </ion-col>

                <ion-col size="5">
                  <span class="h15 gray">
                    Date &nbsp; <br>
                    <div class="comment-flex">
                      <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>
                      <span class="h12"> {{item.createdDate | date: 'dd MMM yyyy'}}</span>
                    </div>
                  </span><br>
                </ion-col>

                <ion-col size="12">
                  <ion-label *ngIf="i == 0" style="color: gray;" class="h12" position="floating">Comment</ion-label>
                  <ion-label *ngIf="i != 0" style="color: gray;" class="h12" position="floating">Reply</ion-label>
                  <ion-item class="ion-textarea">
                    <ion-textarea rows="4" [(ngModel)]="item.comment" disabled maxlength="300"></ion-textarea>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-slide>
            <ion-slide class="card-comments" *ngFor="let item of area.commentPropertyManagements; let i = index">
              <ion-row style="text-align:initial;">
                <ion-col size="2">
                  <div class="avatares">
                    <div class="content">
                      <img src="{{_services.url_images}}{{item.avatar}}" class="img"
                        fallimg="avatar">
                    </div>
                  </div>
                </ion-col>

                <ion-col size="5">
                  <span class="h15 gray">{{item.role}}</span><br>
                  <span class="h12" *ngIf="!show_name_assignee">{{item?.name}}</span>
                  <span class="h12" *ngIf="show_name_assignee">{{(item?.name?.length>10) ?  (item?.name | slice:0:10)+'..': item?.name}}</span>
                </ion-col>

                <ion-col size="5">
                  <span class="h15 gray">
                    Date &nbsp; <br>
                    <div class="comment-flex">
                      <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>
                      <span class="h12"> {{item.createdDate | date: 'dd MMM yyyy'}}</span>
                    </div>
                  </span><br>
                </ion-col>

                <ion-col size="12">
                  <ion-label *ngIf="i == 0" style="color: gray;" class="h12" position="floating">Comment</ion-label>
                  <ion-label *ngIf="i != 0" style="color: gray;" class="h12" position="floating">Reply</ion-label>
                  <ion-item class="ion-textarea">
                    <ion-textarea rows="4" [(ngModel)]="item.comment" disabled maxlength="300"></ion-textarea>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-slide>
          </ion-slides>
        </ion-card>
      </div>
      <br>
      <br>
    </div>
    <!------------------------------------------------------------------------------------------->
    <!--SECCION PARA REMINDER-->
    <div *ngxPermissionsOnly="['1','2','3','11','13','19']">
      <ion-row>
        <ion-col size="7">
          <span class="title_general_black">Reminders<b class="purple">
              {{area.reminderPropertyManagements.length}}</b></span>
        </ion-col>
        <ion-col size="3" class="flexdosts"></ion-col>
        <ion-col size="2" class="align__end">
          <img src="/assets/icon/icon_add.svg" *ngIf="!addReminder_ && __userlog__.role.id!=3" (click)="addReminder_ = !addReminder_"
            style="height: 100%;" class="btn_size">
          <img src="/assets/icon/icon_cancel.svg" *ngIf="addReminder_" (click)="addReminder_ = !addReminder_"
            style="height: 100%; transform: rotate(45deg);" class="btn_size">
        </ion-col>
      </ion-row>

      <div class="editable" *ngIf="addReminder_">
        <ion-row>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-label style="color: gray;" class="h7" position="floating">Reminder Date</ion-label><br>
              <ion-datetime displayFormat="DD MMM YYYY" [(ngModel)]="reminder_data.reminderDate" mode="ios">
              </ion-datetime>
            </ion-item>
          </ion-col>
          <ion-col size="12">
            <ion-label style="color: gray;" class="h12" position="floating">Reminder comment</ion-label>
            <ion-item class="ion-textarea">
              <ion-textarea rows="4" [(ngModel)]="reminder_data.reminderComments" maxlength="300"></ion-textarea>
            </ion-item>
          </ion-col>

          <ion-col size="6" offset="3">
            <ion-button class="buttom_ buttom__btn_login"
              [disabled]="reminder_data.reminderDate == null || reminder_data.reminderComments == undefined"
              (click)="addReminder()">Add
              Reminder</ion-button>
          </ion-col>
        </ion-row>
      </div>

      <div class="activitie" *ngFor="let item of area.reminderPropertyManagements; let i = index">
        <ion-list>
          <ion-item-sliding>
            <ion-item lines="none">
              <ion-row style="width: 100%;">
                <ion-col size="2">
                  <img src="/assets/icon/reminder.svg" class="avatar">
                </ion-col>
                <ion-col size="10">
                  <span class="h15 gray">
                    Date
                    <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>
                    <span class="h12"> {{item.reminderDate | date: 'dd MMM yyyy'}}</span>
                  </span><br>
                  <span class="h15 gray">
                    Comment <span class="h12">{{item.reminderComments}}</span>
                  </span>
                </ion-col>
              </ion-row>
            </ion-item>
            <ion-item-options (click)="deleteReminder(item.id, i)" *ngxPermissionsOnly="['1','2','11','13','19']">
              <ion-item-option color="danger">
                <ion-icon slot="bottom" name="trash" class="iconslot"></ion-icon>
              </ion-item-option>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </div>
      <br>
      <br>
    </div>
    <!--TERMMINA SECCION REMIDERS-->

    <div *ngxPermissionsOnly="['1', '2', '3', '11', '13', '19']">
      <!--SCOPE DOCUMENTS-->
      <ion-row>
        <ion-col size="12">
          <span class="title_general_black">Service Client Documents<b class="purple">
              {{serviceScope.documentcountries.length}}</b></span>
        </ion-col>
      </ion-row>

      <div class="activitie" *ngFor="let item of serviceScope.documentcountries; let i = index" (click)="viewDoc(item.fileRequest)">
        <ion-list lines="none">
          <ion-item-sliding>
            <ion-item>
              <ion-row class="width">
                <ion-col size="2">
                  <img src="/assets/icon/document_2.svg" class="avatar">
                </ion-col>
                <ion-col size="10">
                  <span class="h9">Document Type &nbsp; {{item.documentType}}</span> <br>
                  <span class="h15 gray">
                    <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>Status
                    <span class="h12"> {{item.status}} </span>
                  </span><br>
                  <span class="h15 gray">
                    <ion-icon name="calendar-clear-outline" class="blue"></ion-icon>Privacy
                    <span class="h12"> {{item.privacy}} </span>
                  </span><br>
                </ion-col>
              </ion-row>
            </ion-item>
          </ion-item-sliding>
        </ion-list>

      </div>
      <br>
      <br>
    </div>



    <div>
      <ion-row>
        <ion-col size="12">
          <span class="title_general_black">Scope Client Service</span>
        </ion-col>
      </ion-row>

      <br>

      <ion-row>
        <ion-col size="12">
          <div class="textarea">
            <p [innerHTML]="serviceScope?.scopeDescription"></p>
          </div>
        </ion-col>
      </ion-row>

    </div>
    <!------------------------------------------------------------------------------------------->
    <ion-row *ngxPermissionsOnly="['1','2','3','11','13','19']" class="bottom_padding">
      <ion-col size="6" offset="3">
        <ion-button class="buttom_ buttom__btn_login" (click)="save()">Save</ion-button>
      </ion-col>
    </ion-row>

  </div>
</ion-content>